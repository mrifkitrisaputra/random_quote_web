{
    "sourceFile": "frontend/src/components/pollCard.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1747280659336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1747280788705,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,84 @@\n+import React, { useState } from 'react';\r\n+import { toggleRealtimeVisibility, closePoll, deletePoll } from '../service/api';\r\n+\r\n+const PollCard = ({ poll, onRefresh }) => {\r\n+    const [loading, setLoading] = useState(false);\r\n+\r\n+    const handleToggleVisibility = async () => {\r\n+        setLoading(true);\r\n+        try {\r\n+            await toggleRealtimeVisibility(poll.id, !poll.allow_realtime_results);\r\n+            onRefresh();\r\n+        } catch (err) {\r\n+            alert(\"Gagal mengubah izin realtime\");\r\n+        } finally {\r\n+            setLoading(false);\r\n+        }\r\n+    };\r\n+\r\n+    const handleCloseOperation = async () => {\r\n+        if (!window.confirm(\"Tutup polling ini?\")) return;\r\n+\r\n+        setLoading(true);\r\n+        try {\r\n+            await closePoll(poll.id);\r\n+            onRefresh();\r\n+        } catch (err) {\r\n+            alert(\"Gagal menutup polling\");\r\n+        } finally {\r\n+            setLoading(false);\r\n+        }\r\n+    };\r\n+\r\n+    const handleDelete = async () => {\r\n+        if (!window.confirm(\"Hapus polling ini?\")) return;\r\n+\r\n+        setLoading(true);\r\n+        try {\r\n+            await deletePoll(poll.id);\r\n+            onRefresh();\r\n+        } catch (err) {\r\n+            alert(\"Gagal menghapus polling\");\r\n+        } finally {\r\n+            setLoading(false);\r\n+        }\r\n+    };\r\n+\r\n+    return (\r\n+        <div className=\"border p-4 mb-4 rounded shadow-sm bg-white\">\r\n+            <h3 className=\"font-semibold\">{poll.title}</h3>\r\n+            <p>{poll.description}</p>\r\n+            <p>Status: <strong>{poll.status}</strong></p>\r\n+            <p>Jumlah Suara: <strong>{poll.vote_count}</strong></p>\r\n+\r\n+            <label className=\"flex items-center mt-2\">\r\n+                <input\r\n+                    type=\"checkbox\"\r\n+                    checked={poll.allow_realtime_results || false}\r\n+                    onChange={handleToggleVisibility}\r\n+                    disabled={poll.status === \"closed\"}\r\n+                />\r\n+                <span className=\"ml-2\">Lihat hasil saat aktif</span>\r\n+            </label>\r\n+\r\n+            <div className=\"mt-4 flex gap-2\">\r\n+                <button\r\n+                    onClick={handleCloseOperation}\r\n+                    disabled={poll.status === \"closed\" || loading}\r\n+                    className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600\"\r\n+                >\r\n+                    {poll.status === \"closed\" ? \"Sudah Ditutup\" : \"Tutup\"}\r\n+                </button>\r\n+                <button\r\n+                    onClick={handleDelete}\r\n+                    disabled={loading}\r\n+                    className=\"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700\"\r\n+                >\r\n+                    Hapus\r\n+                </button>\r\n+            </div>\r\n+        </div>\r\n+    );\r\n+};\r\n+\r\n+export default PollCard;\n\\ No newline at end of file\n"
                }
            ],
            "date": 1747280659336,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport { toggleRealtimeVisibility, closePoll, deletePoll } from '../services/api';\r\n\r\nconst PollCard = ({ poll, onRefresh }) => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleToggleVisibility = async () => {\r\n        setLoading(true);\r\n        try {\r\n            await toggleRealtimeVisibility(poll.id, !poll.allow_realtime_results);\r\n            onRefresh();\r\n        } catch (err) {\r\n            alert(\"Gagal mengubah izin realtime\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCloseOperation = async () => {\r\n        if (!window.confirm(\"Tutup polling ini?\")) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            await closePoll(poll.id);\r\n            onRefresh();\r\n        } catch (err) {\r\n            alert(\"Gagal menutup polling\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (!window.confirm(\"Hapus polling ini?\")) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            await deletePoll(poll.id);\r\n            onRefresh();\r\n        } catch (err) {\r\n            alert(\"Gagal menghapus polling\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"border p-4 mb-4 rounded shadow-sm bg-white\">\r\n            <h3 className=\"font-semibold\">{poll.title}</h3>\r\n            <p>{poll.description}</p>\r\n            <p>Status: <strong>{poll.status}</strong></p>\r\n            <p>Jumlah Suara: <strong>{poll.vote_count}</strong></p>\r\n\r\n            <label className=\"flex items-center mt-2\">\r\n                <input\r\n                    type=\"checkbox\"\r\n                    checked={poll.allow_realtime_results || false}\r\n                    onChange={handleToggleVisibility}\r\n                    disabled={poll.status === \"closed\"}\r\n                />\r\n                <span className=\"ml-2\">Lihat hasil saat aktif</span>\r\n            </label>\r\n\r\n            <div className=\"mt-4 flex gap-2\">\r\n                <button\r\n                    onClick={handleCloseOperation}\r\n                    disabled={poll.status === \"closed\" || loading}\r\n                    className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600\"\r\n                >\r\n                    {poll.status === \"closed\" ? \"Sudah Ditutup\" : \"Tutup\"}\r\n                </button>\r\n                <button\r\n                    onClick={handleDelete}\r\n                    disabled={loading}\r\n                    className=\"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700\"\r\n                >\r\n                    Hapus\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PollCard;"
        }
    ]
}