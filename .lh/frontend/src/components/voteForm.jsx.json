{
    "sourceFile": "frontend/src/components/voteForm.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1747281076214,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1747281117388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useState } from 'react';\r\n-import { castVote } from '../services/api';\r\n+import { castVote } from '../service/api';\r\n \r\n const VoteForm = ({ pollID }) => {\r\n     const [optionId, setOptionId] = useState('');\r\n     const [userKey, setUserKey] = useState(localStorage.getItem(`user_key_${pollID}`) || '');\r\n"
                },
                {
                    "date": 1747291624173,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,73 +1,40 @@\n import React, { useState } from 'react';\r\n-import { castVote } from '../service/api';\r\n \r\n-const VoteForm = ({ pollID }) => {\r\n-    const [optionId, setOptionId] = useState('');\r\n-    const [userKey, setUserKey] = useState(localStorage.getItem(`user_key_${pollID}`) || '');\r\n-    const [voted, setVoted] = useState(false);\r\n-    const [error, setError] = useState('');\r\n+const VoteForm = ({ options, onVote }) => {\r\n+    const [selectedOption, setSelectedOption] = useState('');\r\n+    const [userKey, setUserKey] = useState(localStorage.getItem('user_key') || '');\r\n \r\n-    const handleSubmit = async (e) => {\r\n-        e.preventDefault();\r\n-\r\n-        if (!optionId) {\r\n-            setError(\"Silakan pilih salah satu opsi\");\r\n-            return;\r\n-        }\r\n-\r\n-        try {\r\n-            await castVote(pollID, parseInt(optionId), userKey || `user_${Date.now()}`);\r\n-            setVoted(true);\r\n-            alert(\"Terima kasih atas suaramu!\");\r\n-        } catch (err) {\r\n-            setError(err.response?.data?.error || \"Gagal mengirim suara\");\r\n-        }\r\n+    const handleSubmit = () => {\r\n+        if (!selectedOption) return alert(\"Pilih salah satu opsi\");\r\n+        onVote(selectedOption);\r\n     };\r\n \r\n-    const options = [\r\n-        { id: 1, text: \"Sangat Baik\" },\r\n-        { id: 2, text: \"Baik\" },\r\n-        { id: 3, text: \"Biasa Saja\" },\r\n-        { id: 4, text: \"Buruk\" }\r\n-    ];\r\n-\r\n     return (\r\n-        <div className=\"max-w-md mx-auto mt-6 p-4 bg-white shadow rounded\">\r\n-            <h2 className=\"text-xl font-bold mb-4\">Pilih Jawaban</h2>\r\n+        <form onSubmit={handleSubmit}>\r\n+            {options.map((opt) => (\r\n+                <div key={opt.id} className=\"mb-2\">\r\n+                    <label className=\"flex items-center gap-2\">\r\n+                        <input\r\n+                            type=\"radio\"\r\n+                            name=\"vote\"\r\n+                            value={opt.id}\r\n+                            onChange={(e) => setSelectedOption(parseInt(e.target.value))}\r\n+                        />\r\n+                        <span>{opt.text}</span>\r\n+                    </label>\r\n+                </div>\r\n+            ))}\r\n \r\n-            <form onSubmit={handleSubmit}>\r\n-                {options.map((opt) => (\r\n-                    <div key={opt.id} className=\"mb-2\">\r\n-                        <label className=\"flex items-center gap-2\">\r\n-                            <input\r\n-                                type=\"radio\"\r\n-                                name=\"vote\"\r\n-                                value={opt.id}\r\n-                                onChange={(e) => {\r\n-                                    setOptionId(e.target.value);\r\n-                                    setError(\"\");\r\n-                                }}\r\n-                                disabled={voted}\r\n-                            />\r\n-                            <span>{opt.text}</span>\r\n-                        </label>\r\n-                    </div>\r\n-                ))}\r\n-\r\n-                {error && <p className=\"mt-2 text-red-500\">{error}</p>}\r\n-\r\n-                <button\r\n-                    type=\"submit\"\r\n-                    disabled={voted}\r\n-                    className={`mt-4 w-full py-2 px-4 ${\r\n-                        voted ? 'bg-gray-400' : 'bg-blue-600 hover:bg-blue-700'\r\n-                    } text-white rounded transition`}\r\n-                >\r\n-                    {voted ? \"Suara Telah Dikirim\" : \"Kirim Suara\"}\r\n-                </button>\r\n-            </form>\r\n-        </div>\r\n+            <button\r\n+                type=\"button\"\r\n+                onClick={handleSubmit}\r\n+                disabled={!selectedOption}\r\n+                className=\"mt-4 w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n+            >\r\n+                Kirim Suara\r\n+            </button>\r\n+        </form>\r\n     );\r\n };\r\n \r\n export default VoteForm;\n\\ No newline at end of file\n"
                }
            ],
            "date": 1747281076214,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport { castVote } from '../services/api';\r\n\r\nconst VoteForm = ({ pollID }) => {\r\n    const [optionId, setOptionId] = useState('');\r\n    const [userKey, setUserKey] = useState(localStorage.getItem(`user_key_${pollID}`) || '');\r\n    const [voted, setVoted] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (!optionId) {\r\n            setError(\"Silakan pilih salah satu opsi\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await castVote(pollID, parseInt(optionId), userKey || `user_${Date.now()}`);\r\n            setVoted(true);\r\n            alert(\"Terima kasih atas suaramu!\");\r\n        } catch (err) {\r\n            setError(err.response?.data?.error || \"Gagal mengirim suara\");\r\n        }\r\n    };\r\n\r\n    const options = [\r\n        { id: 1, text: \"Sangat Baik\" },\r\n        { id: 2, text: \"Baik\" },\r\n        { id: 3, text: \"Biasa Saja\" },\r\n        { id: 4, text: \"Buruk\" }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"max-w-md mx-auto mt-6 p-4 bg-white shadow rounded\">\r\n            <h2 className=\"text-xl font-bold mb-4\">Pilih Jawaban</h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                {options.map((opt) => (\r\n                    <div key={opt.id} className=\"mb-2\">\r\n                        <label className=\"flex items-center gap-2\">\r\n                            <input\r\n                                type=\"radio\"\r\n                                name=\"vote\"\r\n                                value={opt.id}\r\n                                onChange={(e) => {\r\n                                    setOptionId(e.target.value);\r\n                                    setError(\"\");\r\n                                }}\r\n                                disabled={voted}\r\n                            />\r\n                            <span>{opt.text}</span>\r\n                        </label>\r\n                    </div>\r\n                ))}\r\n\r\n                {error && <p className=\"mt-2 text-red-500\">{error}</p>}\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={voted}\r\n                    className={`mt-4 w-full py-2 px-4 ${\r\n                        voted ? 'bg-gray-400' : 'bg-blue-600 hover:bg-blue-700'\r\n                    } text-white rounded transition`}\r\n                >\r\n                    {voted ? \"Suara Telah Dikirim\" : \"Kirim Suara\"}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VoteForm;"
        }
    ]
}